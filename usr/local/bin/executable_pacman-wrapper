#!/bin/bash
# /usr/local/bin/pacman-wrapper

if [[ "$1" == "-S"* ]] && [[ "$*" =~ (^|[[:space:]])-[A-Za-z]*u|--(sysupgrade) ]]; then
    echo "Hint: Use 'sudo atomic-upgrade' for atomic updates"
    read -t 30 -rp "Continue with regular pacman? [y/N] " answer || exit 1
    [[ "$answer" =~ ^[Yy]$ ]] || exit 1
fi

exec /usr/bin/pacman "$@"
